{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Rule of Law Index (RoLI) and Environmental Performance Index (EPI) - Asia and Globally",
    "subtitle": ["2014-2024", "Source: World Justice Project, Yale", ""],
    "subtitleFontStyle": "italic",
    "subtitleFontSize": 10,
    "anchor": "start",
    "color": "black"
  },
  "data": {
    "url": "https://raw.githubusercontent.com/wqloh/Capstone/refs/heads/main/Asia%20and%20Global%20Top%20Bottom%203%20EPI%20RoL.csv",
    "format": {"type": "csv"}
  },
  "height": 800,
  "width": 800,
  "transform": [
    {"filter": "datum['EPI'] != 0"},
    {"filter": "datum.Year == year"}
  ],
  "params": [
    {
      "name": "year",
      "value": 2024,
      "bind": {
        "input": "range",
        "min": 2014,
        "max": 2024,
        "step": 2,
        "name": "Year:"
      }
    }
  ],
  "layer": [
    {
      "mark": {"type": "circle", "size": 150},
      "encoding": {
        "x": {
          "field": "RoL",
          "type": "quantitative",
          "scale": {"domain": [0.3, 0.85]},
          "title": "Rule of Law Index Score"
        },
        "y": {
          "field": "EPI",
          "type": "quantitative",
          "scale": {"domain": [18, 90]},
          "title": "Environmental Performance Index Score"
        },
        "color": {
          "condition": {
            "test": "datum.Country === 'Rwanda' || datum.Country === 'Guatemala' || datum.Country === 'Madagascar' || datum.Country === 'Estonia' || datum.Country === 'Germany' || datum.Country === 'Luxembourg'",
            "value": "#EA7131"
          },
          "value": "#156180",
          "legend": null
        },
        "tooltip": [
          {"field": "Country"},
          {"field": "Year"},
          {"field": "RoL", "type": "quantitative", "title": "RoLI Score"},
          {"field": "EPI", "type": "quantitative", "title": "EPI Score"}
        ]
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "dx": 10,
        "dy": {
          "expr": "datum.Country == 'Cambodia' ? -10 : datum.Country == 'Kyrgyz Republic' ? -15 : datum.Country == 'Nepal' ? - -15 : datum.Country == 'Uzbekistan' ? - 8 : datum.Country == 'Mongolia' ? - 5 : datum.Country == 'Philippines' ? - 5 : datum.Country == 'Singapore' ? - -7 : datum.Country == 'Vietnam' ? - 5 : datum.Country == 'Indonesia' ? - -7: datum.Country == 'Guatemala' ? - 10: datum.Country == 'Estonia' ? - 4: datum.Country == 'Luxembourg' ? - 3 : 0"
        },
        "fontSize": 10
      },
      "encoding": {
        "x": {"field": "RoL", "type": "quantitative"},
        "y": {"field": "EPI", "type": "quantitative"},
        "text": {"field": "Country"}
      }
    },
    {
      "transform": [{"regression": "EPI", "on": "RoL"}],
      "mark": "line",
      "encoding": {
        "x": {"field": "RoL", "type": "quantitative"},
        "y": {"field": "EPI", "type": "quantitative"}
      }
    }
  ]
}